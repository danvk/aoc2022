#ip 1

     0	seti 123 0 4
     1	bani 4 456 4
     2	eqri 4 72 4
     3	addr 4 1 1
     4	seti 0 0 1
     5	seti 0 1 4
     6	bori 4 65536 3
     7	seti 3730679 4 4

     8	bani 3 255 5       # F = D & 255 (2^8-1)
     9	addr 4 5 4         # E += F
    10	bani 4 16777215 4  # E = E & 16777215 (0b111111111111111111111111 2^24-1)
    11	muli 4 65899 4     # E = E * 65899    (0b10000000101101011)
    12	bani 4 16777215 4  # E = E & 16777215 (0b111111111111111111111111 2^24-1)
    13	gtir 256 3 5       # 256 > D ? F=1 : F=0
    14	addr 5 1 1         # skip next line if F=1
    15	addi 1 1 1         # skip next line
    16	seti 27 1 1        # goto 28
    17	seti 0 0 5         # F=0, goto 18

1815 08 [ "bani", 3, 255, 5 ]      [ 0,  8, 1, 256,     11469373, 256 ] -> [ 0,  8, 1, 256,     11469373, 0 ]
1816 09 [ "addr", 4, 5, 4 ]        [ 0,  9, 1, 256,     11469373,   0 ] -> [ 0,  9, 1, 256,     11469373, 0 ]
1817 10 [ "bani", 4, 16777215, 4 ] [ 0, 10, 1, 256,     11469373,   0 ] -> [ 0, 10, 1, 256,     11469373, 0 ]
1818 11 [ "muli", 4, 65899, 4 ]    [ 0, 11, 1, 256,     11469373,   0 ] -> [ 0, 11, 1, 256, 755820211327, 0 ]
1819 12 [ "bani", 4, 16777215, 4 ] [ 0, 12, 1, 256, 755820211327,   0 ] -> [ 0, 12, 1, 256,      6630527, 0 ]
1820 13 [ "gtir", 256, 3, 5 ]      [ 0, 13, 1, 256,      6630527,   0 ] -> [ 0, 13, 1, 256,      6630527, 0 ]
1821 14 [ "addr", 5, 1, 1 ]        [ 0, 14, 1, 256,      6630527,   0 ] -> [ 0, 14, 1, 256,      6630527, 0 ]
1822 15 [ "addi", 1, 1, 1 ]        [ 0, 15, 1, 256,      6630527,   0 ] -> [ 0, 16, 1, 256,      6630527, 0 ]
1823 17 [ "seti", 0, 0, 5 ]        [ 0, 17, 1, 256,      6630527,   0 ] -> [ 0, 17, 1, 256,      6630527, 0 ]

#   A   B  C      D         E  F
# [ 0, 18, 0, 65536, 11469373, 0 ]
# This is the infinite loop
    18	addi 5 1 2   # C=F+1
    19	muli 2 256 2 # C*=256
    20	gtrr 2 3 2   # C>D ? C=1 : C=0
    21	addr 2 1 1   # skip next if C=1
    22	addi 1 1 1   # skip next
    23	seti 25 1 1  # goto 26
    24	addi 5 1 5   # F++
    25	seti 17 1 1  # goto 18

# Lines 18-25
# Net effect: C = 1; F=floor(D / 256)
while (true) {
     C = 256 * (F + 1)
     if C > D {
          C = 1
          goto 26
     }
     F++
}

16 18 [ "addi", 5, 1, 2 ]   [ 0, 18,   0, 65536, 11469373, 0 ] -> [ 0, 18,   1, 65536, 11469373, 0 ]
17 19 [ "muli", 2, 256, 2 ] [ 0, 19,   1, 65536, 11469373, 0 ] -> [ 0, 19, 256, 65536, 11469373, 0 ]
18 20 [ "gtrr", 2, 3, 2 ]   [ 0, 20, 256, 65536, 11469373, 0 ] -> [ 0, 20,   0, 65536, 11469373, 0 ]
19 21 [ "addr", 2, 1, 1 ]   [ 0, 21,   0, 65536, 11469373, 0 ] -> [ 0, 21,   0, 65536, 11469373, 0 ]
20 22 [ "addi", 1, 1, 1 ]   [ 0, 22,   0, 65536, 11469373, 0 ] -> [ 0, 23,   0, 65536, 11469373, 0 ]
21 24 [ "addi", 5, 1, 5 ]   [ 0, 24,   0, 65536, 11469373, 0 ] -> [ 0, 24,   0, 65536, 11469373, 1 ]
22 25 [ "seti", 17, 1, 1 ]  [ 0, 25,   0, 65536, 11469373, 1 ] -> [ 0, 17,   0, 65536, 11469373, 1 ]
...
                              A   B  C      D         E    F
1813 26 [ "setr", 5, 2, 3 ] [ 0, 26, 1, 65536, 11469373, 256 ] -> [ 0, 26, 1, 256, 11469373, 256 ]
1836 26 [ "setr", 5, 2, 3 ] [ 0, 26, 1,   256,  6630527,   1 ] -> [ 0, 26, 1,   1,  6630527,   1 ]

    26	setr 5 2 3  # D = F
    27	seti 7 6 1  # goto 8

# Nothing ever writes to register 0 (A) so this is where we have control.

    28	eqrr 4 0 5   # exit if E==A
    29	addr 5 1 1
    30	seti 5 1 1   # goto 6
                              A   B  C  D         E  F
1846 28 [ "eqrr", 4, 0, 5 ] [ 0, 28, 1, 1, 16128384, 1 ] -> [ 0, 28, 1, 1, 16128384, 0 ]

